<!DOCTYPE html>
	<html>
		<head>
			<meta charset="UTF-8">
			<meta name="viewport" content="width=device-width, initial-scale=1.0">
			<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
			<meta http-equiv="Pragma" content="no-cache">
			<meta http-equiv="Expires" content="0">
			<title>{{ page.title }}</title>
			<!-- link to main stylesheet with cache busting -->
			<link rel="stylesheet" type="text/css" href="{{ '/css/main.css' | relative_url }}?v={{ site.time | date: '%s' }}">
			<link rel="preconnect" href="https://fonts.googleapis.com">
			<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
			<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap&v={{ site.time | date: '%s' }}" rel="stylesheet">
		</head>
		<body>
		<!-- Mobile hamburger menu -->
		<button class="hamburger-toggle" id="hamburger-toggle" onclick="toggleHamburgerMenu()" aria-label="Open menu and timeline">
			<span></span>
			<span></span>
			<span></span>
		</button>			<!-- Mobile menu overlay -->
			<div class="mobile-menu-overlay" id="mobile-menu-overlay" onclick="closeHamburgerMenu()"></div>
			
			<!-- Mobile menu sidebar -->
			<div class="mobile-menu" id="mobile-menu">
				<div class="mobile-menu-header">
					<h3>Menu & Timeline</h3>
					<button class="mobile-menu-close" onclick="closeHamburgerMenu()">âœ•</button>
				</div>
				
				<!-- Navigation Links -->
				<div class="mobile-menu-section">
					<h4>Navigation</h4>
					<ul class="mobile-nav-links">
						<li><a href="{{ '/' | relative_url }}" onclick="closeHamburgerMenu()">Home</a></li>
						<li><a href="{{ '/about' | relative_url }}" onclick="closeHamburgerMenu()">About</a></li>
						<li><a href="{{ '/cv' | relative_url }}" onclick="closeHamburgerMenu()">CV</a></li>
						<!-- <li><a href="{{ '/blog' | relative_url }}" onclick="closeHamburgerMenu()">Blog</a></li> -->
					</ul>
				</div>
				
				<!-- Timeline Section (only shown on about page) -->
				<div class="mobile-menu-section timeline-section" id="mobile-timeline-section" style="display: none;">
					<h4>Timeline Navigation</h4>
					<p class="timeline-hint">Jump to different periods:</p>
					<div class="mobile-timeline-container" id="mobile-timeline-container">
						<!-- Timeline items will be populated by JavaScript on about page -->
					</div>
				</div>
				
				<!-- Theme Toggle -->
				<div class="mobile-menu-section">
					<button class="mobile-theme-toggle" onclick="toggleTheme()">
						<span id="mobile-theme-text">Dark Mode</span>
					</button>
				</div>
			</div>
			
			<nav>
	    		<ul>
	        		<li><a href="{{ '/' | relative_url }}">Home</a></li>
		        	<li><a href="{{ '/about' | relative_url }}">About</a></li>
	        		<li><a href="{{ '/cv' | relative_url }}">CV</a></li>
	        		<!-- <li><a href="{{ '/blog' | relative_url }}">Blog</a></li> -->
	    		</ul>
			</nav>
			<button id="theme-toggle" aria-label="Toggle dark mode">Dark</button>
			<div class="container">
			
			{{ content }}
			
			</div><!-- /.container -->
			<footer>
	    		<ul>
	        		<li><a href="google.com">email: lepakshiramkiran <-(o)-> hotmail.com</a></li>
	        		<li><a href="https://github.com/iamlrk">github.com/iamlrk</a></li>
				</ul>
			</footer>
			<script>
				// Hamburger menu functionality
				function toggleHamburgerMenu() {
					const menu = document.getElementById('mobile-menu');
					const overlay = document.getElementById('mobile-menu-overlay');
					const toggle = document.getElementById('hamburger-toggle');
					
					if (menu.classList.contains('active')) {
						closeHamburgerMenu();
					} else {
						openHamburgerMenu();
					}
				}
				
				function openHamburgerMenu() {
					const menu = document.getElementById('mobile-menu');
					const overlay = document.getElementById('mobile-menu-overlay');
					const toggle = document.getElementById('hamburger-toggle');
					
					menu.classList.add('active');
					overlay.classList.add('active');
					toggle.classList.add('active');
					document.body.style.overflow = 'hidden';
					
					// Populate timeline if on about page
					populateTimelineInMenu();
				}
				
				function closeHamburgerMenu() {
					const menu = document.getElementById('mobile-menu');
					const overlay = document.getElementById('mobile-menu-overlay');
					const toggle = document.getElementById('hamburger-toggle');
					
					menu.classList.remove('active');
					overlay.classList.remove('active');
					toggle.classList.remove('active');
					document.body.style.overflow = '';
				}
				
				function populateTimelineInMenu() {
					const timelineSection = document.getElementById('mobile-timeline-section');
					const timelineContainer = document.getElementById('mobile-timeline-container');
					
					// Check if we're on the about page and timeline items exist
					const timelineItems = document.querySelectorAll('.timeline-item');
					if (timelineItems.length > 0 && window.location.pathname.includes('about')) {
						timelineSection.style.display = 'block';
						timelineContainer.innerHTML = '';
						
						timelineItems.forEach(item => {
							const period = item.getAttribute('data-period');
							const dateText = item.querySelector('.timeline-date').textContent;
							
							const menuItem = document.createElement('div');
							menuItem.className = 'mobile-timeline-item';
							menuItem.innerHTML = `<span>${dateText}</span>`;
							menuItem.onclick = () => {
								if (window.showTimelineContent) {
									window.showTimelineContent(period);
								}
								closeHamburgerMenu();
							};
							
							// Add active class if timeline item is active
							if (item.classList.contains('active')) {
								menuItem.classList.add('active');
							}
							
							timelineContainer.appendChild(menuItem);
						});
					} else {
						timelineSection.style.display = 'none';
					}
				}
				
				function toggleTheme() {
					const themeToggle = document.getElementById('theme-toggle');
					if (themeToggle) {
						themeToggle.click();
					}
					// Update mobile theme toggle text
					updateMobileThemeToggle();
				}
				
				function updateMobileThemeToggle() {
					const mobileThemeText = document.getElementById('mobile-theme-text');
					const currentTheme = document.body.getAttribute('data-theme');
					if (mobileThemeText) {
						mobileThemeText.textContent = currentTheme === 'dark' ? 'Light Mode' : 'Dark Mode';
					}
				}
				
				// Keyboard support
				document.addEventListener('keydown', function(e) {
					if (e.key === 'Escape') {
						closeHamburgerMenu();
					}
				});
				
				// Initialize mobile theme toggle text
				document.addEventListener('DOMContentLoaded', function() {
					updateMobileThemeToggle();
				});
			</script>
			
			<script>
				// Theme switching functionality
				const themeToggle = document.getElementById('theme-toggle');
				const body = document.body;
				
				// Check for saved theme or default to light mode
				const currentTheme = localStorage.getItem('theme') || 'light';
				body.setAttribute('data-theme', currentTheme);
				updateToggleButton(currentTheme);
				
				themeToggle.addEventListener('click', () => {
					const currentTheme = body.getAttribute('data-theme');
					const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
					
					body.setAttribute('data-theme', newTheme);
					localStorage.setItem('theme', newTheme);
					updateToggleButton(newTheme);
				});
				
				function updateToggleButton(theme) {
					themeToggle.textContent = theme === 'dark' ? 'Light' : 'Dark';
					updateMobileThemeToggle();
				}
			</script>
		</body>
	</html>
